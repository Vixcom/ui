// /* All color definition for buttons, inputs, filter-effects */
@use "sass:selector";

@mixin unify-selector($a, $b) {
  @at-root #{selector.unify($a, $b)} {
    @content;
  }
}

@mixin append-selector($a, $b) {
  @at-root #{selector.append($a, $b)} {
    @content;
  }
}

// @mixin check-child-state($child) {
//   @at-root #{selector.unify($child, &)} {
//     @content;
//   }
// }

$default: #5B5B5B !default;
$default-background: #FFFFFF !default;
$primary: #34A853 !default;
$secondary: #5c2d6b !default;
$white: #FFFFFF !default;
$black: #000000 !default;
$green: #1D5C2E !default;
$orange: #F58220 !default;
$purple: #561843 !default;
$blue: #0365A3 !default;
$yellow: #C4C400 !default;
$gold: #FFDF00 !default;
$pink: #ED028C !default;
$success: #24B624 !default;
$warning: #FFC107 !default;
$danger: #DC3545 !default;
$info: #17A2b8 !default;
$muted: #7D7D7D !default;
$border-color: #E4E4E4 !default;
$card-shadow: 0 1px 30px -10px transparentize($black, 0.5) !default;
$app-font-size: 0.85rem;

$app-colors-mapped: () !default;
$app-hsla-mapped: () !default;

$app-colors-mapped: map-merge(('default': (bg: $default, fg: $white),
    'primary': (bg: $primary, fg: $white),
    'secondary': (bg: $secondary, fg: $white),
    'white': (bg: $white, fg: $default),
    'black': (bg: $black, fg: $white),
    'gold': (bg: $gold, fg: $white),
    'info': (bg: $info, fg: $white),
    'error': (bg: $danger, fg: $white),
    'success': (bg: $success, fg: $white),
    'warn': (bg: $warning, fg: $black),
    'pink': (bg: $pink, fg: $white),
    'orange': (bg: $orange, fg: $white),
    'purple': (bg: $purple, fg: $white),
    'green': (bg: $green, fg: $white),
    'blue': (bg: $blue, fg: $white),
    'yellow': (bg: $yellow, fg: $white),
    'muted': (bg: $muted, fg: $white),
    'transparent': (bg: transparent, fg: $default)), $app-colors-mapped);

/* HSL Darken = level - n; Lighten = level + n */

// /* Functions and Mixins */

@mixin mapped-bg-color-var-variant($selector, $k, $cm) {
  #{$selector} {
    background-color: hsla(var(--#{$k}-hs), var(--#{$k}-l), var(--#{$k}-a)) !important;
    color: var(--#{$k}-c, map-get($cm, "fg")) !important;
    border-color: hsla(var(--#{$k}-hs), var(--#{$k}-l), var(--#{$k}-a)) !important;

    &.is-blur {
      backdrop-filter: blur(10px);
      background-color: hsla(var(--#{$k}-hs), var(--#{$k}-l), 0.5) !important;

      &:hover {
        background-color: hsla(var(--#{$k}-hs), var(--#{$k}-l), 0.25) !important;
      }
    }
  }

  a#{$selector},
  button#{$selector} {
    &:hover {
      background-color: hsla(var(--#{$k}-hs), calc(var(--#{$k}-l) - 10%), var(--#{$k}-a)) !important;
      color: var(--#{$k}-c, map-get($cm, "c"));
    }

    &:active {
      background-color: hsla(var(--#{$k}-hs), calc(var(--#{$k}-l) - 20%), var(--#{$k}-a)) !important;
    }
  }
}

@mixin mapped-bg-color-variant($selector, $cm) {
  #{$selector} {
    background-color: map-get($cm, "bg") !important;
    color: map-get($cm, "fg") !important;
    border: none;

    &.is-blur {
      backdrop-filter: blur(10px);
      background-color: transparentize(map-get($cm, "bg"), 0.5) !important;

      &:hover {
        background-color: transparentize(map-get($cm, "bg"), 0.25) !important;
      }
    }
  }

  a#{$selector},
  button#{$selector} {
    &:hover {
      background-color: darken(map-get($cm, "bg"), 10%) !important;
      color: map-get($cm, "fg") !important;
    }

    &:active {
      background-color: darken(map-get($cm, "bg"), 20%) !important;
    }
  }

}

@mixin mapped-tabs-variant($selector, $cm) {
  #{$selector} {

    &.fill {
      .tab {
        background-color: map-get($cm, "bg");
        color: map-get($cm, "fg");

        &.active {
          background-color: darken(map-get($cm, "bg"), 10%);
        }
      }
    }

    .tab {
      border: none;

      &:hover:not(.active) {
        background-color: lighten(map-get($cm, "bg"), 40%);
        color: darken(map-get($cm, "fg"), 90%);
      }

      &.active {
        background-color: map-get($cm, "bg");
        color: map-get($cm, "fg");
      }
    }
  }
}

@mixin mapped-color-var-variant($selector, $k, $cm) {
  #{$selector} {
    color: var(--#{$k}, map-get($cm, "bg")) !important;
  }

  a#{$selector},
  button#{$selector} {
    &:hover {
      color: hsla(var(--#{$k}-hs), calc(var(--#{$k}-l) - 10%), var(--#{$k}-a)) !important;
    }

    &:active {
      color: hsla(var(--#{$k}-hs), calc(var(--#{$k}-l) - 20%), var(--#{$k}-a)) !important;
    }
  }

}

@mixin mapped-color-variant($selector, $cm) {
  #{$selector} {
    color: map-get($cm, "bg") !important;
  }

  a#{$selector},
  button#{$selector} {
    &:hover {
      color: darken(map-get($cm, "bg"), 10%) !important;
    }

    &:active {
      color: darken(map-get($cm, "bg"), 20%) !important;
    }
  }

}

@mixin mapped-g-color-variant($selector, $cm) {
  #{$selector} {
    background: linear-gradient(map-get($cm, "bg"), darken(map-get($cm, "bg"), 10%)) !important;
    color: map-get($cm, "fg");
    border: none;
  }

  a#{$selector},
  button#{$selector} {
    &:hover {
      background: linear-gradient(lighten(map-get($cm, "bg"), 10%), map-get($cm, "bg")) !important;
      color: map-get($cm, "fg");
    }

    &:active {
      background: linear-gradient(darken(map-get($cm, "bg"), 10%), map-get($cm, "bg"));
    }
  }
}

@mixin mapped-alert-var-variant($selector, $k, $cm) {
  #{$selector} {
    background-color: hsla(var(--#{$k}-hs), calc(var(--#{$k}-l) + 45%), var(--#{$k}-a)) !important;
    color: hsla(var(--#{$k}-hs), calc(var(--#{$k}-l) - 45%), var(--#{$k}-a)) !important;
    border-color: hsla(var(--#{$k}-hs), var(--#{$k}-l), var(--#{$k}-a)) !important;

    &.is-blur:not(:hover) {
      backdrop-filter: blur(10px) !important;
      background-color: hsla(var(--#{$k}-hs), calc(var(--#{$k}-l) + 45%), 0.5) !important;
    }
  }
}

@mixin mapped-alert-variant($selector, $cm) {
  #{$selector} {
    background-color: lighten(map-get($cm, "bg"), 45%);
    color: darken(map-get($cm, "bg"), 45%);
    border: none;
  }
}

@mixin mapped-outline-var-variant($selector, $k, $cm) {
  #{$selector} {
    background-color: transparent !important;
    color: hsla(var(--#{$k}-hs), var(--#{$k}-l), var(--#{$k}-a)) !important;
    border-color: currentColor !important;

    &.is-blur {
      backdrop-filter: blur(10px) !important;
      background-color: hsla(var(--#{$k}-hs), calc(var(--#{$k}-l) - 45%), 0.5) !important;
    }
  }

  a#{$selector},
  button#{$selector} {
    &:hover {
      background-color: hsla(var(--#{$k}-hs), calc(var(--#{$k}-l) - 10%), var(--#{$k}-a)) !important;
      color: var(--#{$k}-c, map-get($cm, "c")) !important;
    }

    &:active {
      background-color: hsla(var(--#{$k}-hs), calc(var(--#{$k}-l) - 20%), var(--#{$k}-a)) !important;
    }
  }
}

@mixin mapped-outline-variant($selector, $cm) {
  #{$selector} {
    background-color: transparent;
    color: map-get($cm, "bg");
    border-color: currentColor;

  }

  a#{$selector},
  button#{$selector} {
    &:hover {
      background-color: darken(map-get($cm, "bg"), 10%);
      color: map-get($cm, "fg");
    }

    &:active {
      background-color: darken(map-get($cm, "bg"), 20%) !important;
    }
  }
}